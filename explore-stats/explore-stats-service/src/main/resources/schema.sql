CREATE TABLE IF NOT EXISTS apps
(
    id   BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    name VARCHAR(255) NOT NULL
);

CREATE TABLE IF NOT EXISTS hits
(
    id     BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    app_id BIGINT       NOT NULL,
    uri    VARCHAR(512) NOT NULL,
    ip     VARCHAR(46)  NOT NULL,
    sent   TIMESTAMP WITHOUT TIME ZONE,
    CONSTRAINT fk_app_endpoint_hits FOREIGN KEY (app_id) REFERENCES apps (id) ON DELETE CASCADE
)